# ADR-0003: Unresolved refs（参照先未確定）の保留ログ

- Date: 2026-01-26
- Status: Deferred（根拠確定まで保留）
- Related:
  - docs/db/refs_missing.md
  - docs/db/data_dictionary.md

---

## 背景

tools/check_missing_refs.php により「*_id なのに参照定義が確定できない」項目が検出された。
決め打ちせず、根拠（既存テーブル/旧DB/実装コード）を確認できるまで保留とする。

---

## 対象（2026-01-26 時点）

### informations.required_training_id
- 検出元：
  - database/migrations/2025_09_01_000047_create_information_table.php（required_training_id が存在）

### pro_bowlers.login_id
- 検出元：
  - database/migrations/2025_09_02_000017_update_pro_bowlers_for_csv_import.php（login_id が存在）

---

## 保留中のルール

- data_dictionary.md に推測で `->` を追加しない
- 参照先が確定するまで refs_missing / ADR で追跡する

---

## 確定のための最短手順

1. migrations から候補テーブル（trainings / users / logins 等）の実体を確認
2. アプリコードで利用箇所を検索（required_training_id / login_id）
3. 旧DB（SQL/SQLite）や画面仕様があれば突合して確定

---

## 確定後にやること

- docs/db/data_dictionary.md に `table.column -> ref_table.id` を追記
- tools/generate_er_from_dictionary.php を実行
- tools/check_missing_refs.php を実行し refs_missing から消えることを確認
